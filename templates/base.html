{% load static tailwind_tags %}

{% load static %}
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Device Manager</title>
        <link rel="stylesheet" href="{% static 'dist/styles.css' %}">
        <link rel="stylesheet" href="{% static 'css/flatpickr.min.css' %}">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <script src="{% static 'js/chart.js' %}"></script>
        <script src="{% static 'js/flatpickr.min.js' %}"></script>
		{% tailwind_css %}
    </head>
    <body class="bg-atb-g-50 min-h-screen w-full" >
        {% include 'nav-bar.html'%}
        
        <div class="fixed top-25 left-1/2 transform -translate-x-1/2 w-96 z-50" id="flash-messages">
          {% if messages %}
            {% for message in messages %}
              <div class="
                flash-message
                px-4 py-2 rounded shadow mb-2
                {% if message.tags == 'error' %}
                  bg-atb-e-100 text-atb-e-500 border border-atb-e-300
                {% elif message.tags == 'success' %}
                  bg-atb-s-100 text-atb-s-500 border border-atb-s-300
                {% elif message.tags == 'warning' %}
                  bg-atb-w-100 text-atb-w-500 border border-atb-w-300
                {% else %}
                  bg-atb-g-100 text-atb-g-500 border border-atb-g-300
                {% endif %}
              ">
                {{ message }}
              </div>
            {% endfor %}
          {% endif %}
        </div>
    
        {% block content %}

        {% endblock %}



        <!-- Toast Container -->
        <div id="toast-container" class="fixed top-5 right-5 z-50 flex flex-col space-y-2"></div>

        <!-- Notification History Tab -->
        <div id="notification-tab" class="fixed bottom-5 right-5 w-80 max-h-96 bg-white border border-gray-300 shadow-lg rounded-md flex flex-col hidden font-sans text-sm">
          <div class="px-4 py-2 border-b border-gray-200 font-semibold cursor-pointer select-none flex justify-between items-center" onclick="toggleNotificationTab()">
            Notifications
            <button aria-label="Close" class="text-gray-600 hover:text-gray-900 font-bold">&times;</button>
          </div>
          <div id="notification-list" class="overflow-y-auto px-4 py-2 flex flex-col space-y-3"></div>
        </div>

        <!-- Button to open Notification Tab -->
        <button id="notification-btn" onclick="toggleNotificationTab()" class="fixed bottom-5 right-5 bg-atb-p-500 hover:bg-atb-p-600 text-white px-4 py-2 rounded-md shadow-lg font-semibold focus:outline-none focus:ring-2 focus:ring-atb-p-300">
          Notifications
        </button>

<script>

const toastContainer = document.getElementById("toast-container");
const notificationList = document.getElementById("notification-list");
const notificationTab = document.getElementById("notification-tab");
const notificationBtn = document.getElementById("notification-btn");

function toggleNotificationTab() {
  if (notificationTab.style.display === "flex") {
    notificationTab.style.display = "none";
    notificationBtn.style.display = "block";
  } else {
    notificationTab.style.display = "flex";
    notificationBtn.style.display = "none";
  }
}
</script>
</body>
</html>
