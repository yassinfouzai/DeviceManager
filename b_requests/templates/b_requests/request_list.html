{% extends "base.html" %}

{% block content %}
<div class="min-h-screen flex items-start justify-center mt-20 px-4">
    <div class="w-full max-w-2xl bg-white border border-[#899ea9] text-[#334155] p-6 rounded-2xl shadow-lg" style="box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);">

        <h2 class="text-3xl font-bold text-center mb-8 text-black">Request List</h2>


        <!-- Tabs -->
        <div class="flex justify-center space-x-4 mb-8">
            <button id="borrow-tab"
                class="tab-button px-5 py-2 text-sm sm:text-base font-medium rounded-lg transition-colors duration-200 border border-blue-600 bg-blue-600 text-white"
                onclick="showTab('borrow')">
                Borrow Requests
            </button>
            <button id="return-tab"
                class="tab-button px-5 py-2 text-sm sm:text-base font-medium rounded-lg transition-colors duration-200 border border-blue-600 text-blue-600 bg-white hover:bg-blue-50"
                onclick="showTab('return')">
                Return Requests
            </button>
        </div>


        <!-- Borrow Request List -->


        <div id="borrow-section" class="tab-section">
            {% if borrows %}
                <div class="space-y-4">
                    {% for instance in borrows %}
                        <a href="{% url 'requests:borrow-detail' instance.id %}" class="block bg-[#f1f5f9] rounded-xl p-5 shadow-sm hover:shadow-md hover:bg-[#e2e8f0] transition duration-300">
                            <h3 class="text-xl font-semibold text-[#334155]">{{ instance }}</h3>
                            <p class="text-[#475569]">Requested at {{ instance.date_requested }} &bull; Returning on {{ instance.return_date }}</p>
                        <div class="flex justify-start mt-2">
                            {% if instance.approved %}
                                <span class="inline-block px-3 py-1 text-sm font-semibold text-green-800 bg-green-200 rounded-lg">
                                    Approved
                                </span>
                            {% else %}
                                <span class="inline-block px-3 py-1 text-sm font-semibold text-yellow-800 bg-yellow-200 rounded-lg">
                                    Verifying
                                </span>
                            {% endif %}
                        </div>
                        </a>
                    {% endfor %}
                </div>
            {% else %}
                <p class="text-center text-gray-500">No borrow requests available.</p>
            {% endif %}
        </div>

        <!-- Return Request List -->
        

        <div id="return-section" class="tab-section hidden">
            {% if returns %}
                <div class="space-y-4">
                    {% for instance in returns %}
                        <a href="{% url 'requests:return-detail' instance.id %}" class="block bg-[#f1f5f9] rounded-xl p-5 shadow-sm hover:shadow-md hover:bg-[#e2e8f0] transition duration-300">
                            <h3 class="text-xl font-semibold text-[#334155]">{{ instance }}</h3>
                            <p class="text-[#475569]">Condition : {{ instance.condition }} &bull; Feedback : {{ instance.feedback|slice:":20" }}</p>
                        <div class="flex justify-start mt-2">
                            {% if instance.approved %}
                                <span class="inline-block px-3 py-1 text-sm font-semibold text-green-800 bg-green-200 rounded-lg">
                                    Approved
                                </span>
                            {% else %}
                                <span class="inline-block px-3 py-1 text-sm font-semibold text-yellow-800 bg-yellow-200 rounded-lg">
                                    Verifying
                                </span>
                            {% endif %}
                        </div>
                        </a>
                    {% endfor %}
                </div>
            {% else %}
                <p class="text-center text-gray-500">No return requests available.</p>
            {% endif %}
        </div>

    </div>
</div>


<script>
    function showTab(tab) {
        const borrowTab = document.getElementById('borrow-tab');
        const returnTab = document.getElementById('return-tab');
        const borrowSection = document.getElementById('borrow-section');
        const returnSection = document.getElementById('return-section');

        if (tab == 'borrow') {
            borrowSection.classList.remove('hidden');
            returnSection.classList.add('hidden');

            borrowTab.classList.remove('bg-white', 'text-blue-600', 'hover:bg-blue-50');
            borrowTab.classList.add('bg-blue-600', 'text-white');

            returnTab.classList.remove('bg-blue-600', 'text-white');
            returnTab.classList.add('bg-white', 'text-blue-600', 'hover:bg-blue-50');
        } else {
            borrowSection.classList.add('hidden');
            returnSection.classList.remove('hidden');

            returnTab.classList.remove('bg-white', 'text-blue-600', 'hover:bg-blue-50');
            returnTab.classList.add('bg-blue-600', 'text-white');

            borrowTab.classList.remove('bg-blue-600', 'text-white');
            borrowTab.classList.add('bg-white', 'text-blue-600', 'hover:bg-blue-50');
        }
    }
</script>

{% endblock content %}

